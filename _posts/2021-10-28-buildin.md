---
layout: post
title: Unity EditorWindow - add object with child in tag[C#,Unity]
categories: [Unity, C#]
description: ! Unityエディタ拡張試作
---

タイトル：MiniMapBuilder

制作期間:2017/11 ~ 2017/11　約3時間

コンセプト：buildinで簡単にミニマップ作りたい

Github:[MiniMapBuilder](https://github.com/savioleung/mmi)


説明↓

中途半端な作品です、

大前提として、ステージの遥か上にProjection : Orthographicなカメラを設置

ステージ遥か下にマップの画像を設置

そしてこのbuildinを使って、敵の上にミニマップに表示するゲームオブジェクトを設置することが出来る


![buildin](https://raw.githubusercontent.com/savioleung/savioleung.github.io/master/images/buildin/buildin_1.png)

GameobjectTag にシーン内に「これから作成するオブジェクト」を「作成したいオブジェクト」のTagを入力

IconObject に「これから作成したいオブジェクト」を選択

x,y,z　に　オブジェクトの移動量を入力、入力しない場合はオブジェクトの中心に生成される

Createを押せば、「これから作成したいオブジェクト」が生成されます

![buildin](https://raw.githubusercontent.com/savioleung/savioleung.github.io/master/images/buildin/buildin_2.png)



![buildin](https://raw.githubusercontent.com/savioleung/savioleung.github.io/master/images/buildin/buildin_3.png)

↓ミニマップ

![buildin](https://raw.githubusercontent.com/savioleung/savioleung.github.io/master/images/buildin/buildin_4.png)


<details>
    <summary>＋コード</summary>

{% highlight csharp %}

public class MiniMapIconBuilder : EditorWindow {
	// デフォルト
	string theTag = "enemy";
	float x,y,z;

	public GameObject go;
	GameObject[] gos;


	// tabs attributes
	public int toolbarInt = 0;
	public string[] toolbarStrings = new string[] {"Object", "Scene", "Lightmap"};

	// ツールパーに表示
	[MenuItem("MiniMapIconBuilder/Builer")]
	static void Init()
	{
		// get exiting open window or if none, make a new one:
		MiniMapIconBuilder window = (MiniMapIconBuilder)EditorWindow.GetWindow(typeof(MiniMapIconBuilder));
		window.Show ();
	}

	void OnGUI()
	{	GUILayout.BeginHorizontal ();
		GUILayout.Label ("GameobjectTag", EditorStyles.boldLabel);		

		theTag = GUILayout.TextField (theTag, 15);			//tag

		GUILayout.EndHorizontal();

		EditorGUILayout.BeginHorizontal();
		GUILayout.Label ("IconObject", EditorStyles.boldLabel);

		//移動量
		go = (GameObject)EditorGUILayout.ObjectField (go, typeof(Object), true);
		EditorGUILayout.EndHorizontal();

		EditorGUILayout.BeginHorizontal();
		GUILayout.Label ("x", EditorStyles.boldLabel);
		x = EditorGUILayout.FloatField (x);	
		GUILayout.Label ("y", EditorStyles.boldLabel);
		y = EditorGUILayout.FloatField (y);	
		GUILayout.Label ("z", EditorStyles.boldLabel);
		z = EditorGUILayout.FloatField (z);	
		EditorGUILayout.EndHorizontal();

		//ゲームオブジェクトを作成
		if (GUILayout.Button ("Create")) {
			Debug.Log (theTag);
			gos= null;
			if (gos == null)
				gos = GameObject.FindGameObjectsWithTag(theTag);
			int i = 0;
	
			GameObject icon;
			foreach (GameObject tagedObject in gos)
			{
				 icon = Instantiate(go, go.transform.position, go.transform.rotation);
					icon.transform.parent = gos [i].transform;
					i++;

				icon.transform.localPosition = new Vector3 (x, y, z);
			}


		}
	}


}
{% endhighlight %}

</details>