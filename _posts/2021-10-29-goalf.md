---
layout: post
title: goalf
categories: []
tags: []
description: ! 物理で動くボールを弾いてゴールに入れるゲーム
---
![bear](https://raw.githubusercontent.com/savioleung/savioleung.github.io/master/images/goalf_1.png)

タイトル：goalf

コンセプト：物理で動くボールを弾いてゴールに入れるゲーム

Github:[goalf](https://github.com/savioleung/goalf)
{% highlight cpp %}
if (!play && inputMode == 2)
		{

			if (MouseL.pressed())
			{
				// 書き込む線の始点は直前のフレームのマウスカーソル座標
				// （初回はタッチ操作時の座標のジャンプを防ぐため、現在のマウスカーソル座標にする）
				const Point from = MouseL.down() ? Cursor::Pos() : Cursor::PreviousPos();

				// 書き込む線の終点は現在のマウスカーソル座標
				const Point to = Cursor::Pos();

				// image に線を書き込む
				Line(from, to).overwrite(image, thickness, Palette::Gray);

				// 書き込み終わった image でテクスチャを更新
				texture.fill(image);
			}
			else if (MouseL.up())
			{
				// 画像の非透過部分から Polygon を作成（穴無し）
				if (const Polygon polygon = image.alphaToPolygon(1, false))
				{
					// Polygon を適切な位置に移動し、P2Body として追加
					const Polygon polygon2 = polygon.simplified(2.0)
						.moveBy((-canvasSize / 2).x + 10, (-canvasSize / 2).y).scale(1 / camera.getScale());
					floors << world.createStaticPolygon(camera.getCenter(), polygon2);
				}

				// 画像データをリセット
				image.fill(Color(0, 0));

				// テクスチャを更新
				texture.fill(image);
			}

		}
{% endhighlight %}
